---
layout : post
title :  2020-11-18 TIL
categories : TIL
layout : single
toc : true 
toc_sticky : true
---

### db 모델 리뷰

사용자 - 회원/관리자로 나눠놓은 것은 과도한 정규화이므로 회원으로 통일한다.
사용자 레벨(권한)을 따로 준다.

만약 관리자가 9번이고 사용자가 1번일 경우
관리자 페이지에서는 권한을 9번으로 해서 주면 되고 사용자 페이지에서는 1번 권한을 쓰면 된다.

이름은 null 허용

구글, 카카오 아이디 널 허용
회원 가입 할 때 구글 아이디인지, 카카오 아이디인지 알아야 한다.
구글, 카카오는 로그인이 끝나면 이메일을 받는다.
이메일이 같으면 구글이나 카카오 둘 중 하나만 할 지 정해야 한다.
한 사람이 아이디를 두개 만들 수 없기 때문에
구글이냐 카카오냐에 따라서 sns유형에 관련해서 정리를 해야 한다.
로그인 유형
로그인 유형 번호
유형명

일반 로그인 / 구글 / 카카오 냐에 따라서
이메일은 일반일 때는 이메일 / 구글이면 구글 이메일 / 카카오면 카카오 이메일
이메일은 중복이 되면 안되기 때문에 인덱스

인덱스를 지정할 때 컬럼을 지정하지 않으면 오류가 뜬다.

비밀번호 힌트 질문

회원 상태 번호

상태 변경일

댓글
회원이 게시물을 올린다.
게시물 전에 영화
영화는 관리자가 올리는 것
상태는 삭제 / 게시중
이 영화에 대해 회원이 게시글을 올린다.
텍스트는 후기내용으로
후기 위치는 출력 위치 xy좌표 -> 출력 x좌표, 출력 y좌표
게시물은 영화 후기로
게시물 번호는 영화 후기 번호로

저장 이력
영화 후기 번호와 회원 번호를 프라이머리 키로 둘 수도 있고
저장 이력 번호를 프라이머리 키로 둘 수도 있다

태그 게시물
태그와 게시물이 다대다

좋아요 유형
좋아요 유형
유형 번호 = 좋아요 된 대상 유형 번호

팔로우 유형 역시 좋아요와 같다
태그와 회원 팔로우

회원이 후기와 댓글에 댓글을 달 수 있다.

댓글과 대댓글
영화 후기에 댓글을 달아야 한다.

대댓글은 큐앤에이와 같다. mysql 계층형 게시판
게시물 고유 번호 / 그룹 / 순서 / 단계(들여쓰기) / 제목
그룹과 순서로 정렬한다.

댓글 그룹 번호가 영화 후기 번호

