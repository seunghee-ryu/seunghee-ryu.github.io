---
layout : post
title :  2020-12-03 TIL
categories : TIL
layout : single
toc : true 
toc_sticky : true
---



### Include

- 한 서블릿에서 명령을 실행하다가 다른 서블릿으로 가서 그 서블릿을 실행한 후에 다시 돌아와 남은 명령을 처리한다.
  - 출력 시에는 두개의 서블릿을 순서대로 한 화면에서 보여준다.

- forward는 한 서블릿에서 명령을 실행하다가 다른 서블릿으로 가게되면 지금까지 출력한 것을 버리고 다른 서블릿만 출력한다.



#### html

- html은 고정된 것이기 때문에 쉽게 삽입하고 뺄 수 없다.
  - 그러므로 보통 jsp로 만든다.



### cookie

- 웹 서버에서 웹 브라우저 쪽으로 보내는 데이터
- 쿠키를 받은 웹 브라우저는 웹 서버에 요청할때마다 서버에서 받은 쿠키를 요청 헤더에 첨부하여 보낸다.
- 서버에 저장하는 데이터

```java
GET /java-web/ex10/s2 HTTP/1.1
Host: localhost:8080 Connection: keep-alive ... Cookie:
name=hong; age=20; working=true; name2=홍길동; name3=%ED%99%8D%EA%B8%B8%EB%8F%99
```

- 쿠키를 웹 브라우저에게 보낼때는 쿠키를 응답 헤더에 담아서 보낸다.

```java
Cookie c1 = new Cookie("name", "hong");
Cookie c5 = new Cookie("name3", URLEncoder.encode("홍길동", "UTF-8")); // 서버가 한글을 못 읽을수도 있으니 인코딩을 하는 경우가 많다.
response.addCookie(c1);
response.addCookie(c5);
```

- 쿠키를 꺼낼때

```java
Cookie[] cookies = request.getCookies();
 
response.setContentType("text/plain;charset=UTF-8");
PrintWriter out = response.getWriter();

if (cookies != null) {
	for (Cookie c : cookies) {
		out.printf("%s=%s\n",
		c.getName(),
		c.getValue(),
		URLDecoder.decode(c.getValue(), "UTF-8"));
```

- 요청 헤더에 쿠키가 없을 때 리턴되는 것은 빈 배열이 아니라 null이다.

- 쿠키의 유효기간을 설정할 때
  - 유효 기간을 지정하지 않으면 웹 브라우저를 실행하는 동안은 살아있다.
  - 유효 기간이 살아있으면 하드 디스크에 쿠키를 저장해놓기 때문에 쿠키가 살아있다.

```java
Cookie c2 = new Cookie("v2", "bbb");
c2.setMaxAge(30)
```

- 쿠키의 사용 범위를 설정할 때

```java
HTTP/1.1 200
Set-Cookie: v1=aaa
Set-Cookie: v2=bbb; Path=/eomcs-java-web/ex10/a
Set-Cookie: v3=ccc; Path=/eomcs-java-web
```

- 현재 url은 bit camp-web-project/auth/login 일 때 /auth 를 말한다.



#### 브라우저의 핵심 부품

- html 렌더러 : html을 화면에 그려주는 것(크롬이 기준이고 크롬에서 되는 것이 사파리에서 안될수도 있다.)
- 자바 스크립트 엔진 : 자바 스크립트를 보여주는 것
- 리눅스의 khtml이라는 것을 가져와서 만든 것이 WebKit이고 애플에서 공개한 웹킷을 가져와서 만든 것이 크롬이다.



### 서블릿 보관소



